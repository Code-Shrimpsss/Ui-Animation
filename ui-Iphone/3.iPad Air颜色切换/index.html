<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>iPad Air颜色切换</title>
  </head>
  <link rel="stylesheet" href="./index.css" />

  <body>
    <div class="box">
      <div class="container">
        <div class="slab content_1">
          <img src="./image/img_1.jpeg" alt="slab" />
          <h1>Silver</h1>
        </div>
      </div>
      <div class="container">
        <div class="slab content_2">
          <img src="./image/img_2.jpeg" alt="slab" />
          <h1>
            Space <br />
            Gray
          </h1>
        </div>
      </div>
      <div class="container">
        <div class="slab content_3">
          <img src="./image/img_3.jpeg" alt="slab" />
          <h1>Rose Gold</h1>
        </div>
      </div>
      <div class="container">
        <div class="slab content_4">
          <img src="./image/img_4.jpeg" alt="slab" />
          <h1>Green</h1>
        </div>
      </div>
      <div class="container">
        <div class="slab content_5">
          <img src="./image/img_5.png" alt="slab" />
          <h1>
            and <br />
            Sky Blue
          </h1>
        </div>
      </div>
    </div>

    <script>
      const $ = (name) => document.querySelector(name);
      const imgs = [...Array(5)].map((_, i) =>
        $(`.container:nth-child(${i + 2})`)
      );

      function scrollEvent() {
        const scrolled =
          document.documentElement.scrollTop /
          (document.documentElement.clientHeight * 4);

        imgs[0].style.clipPath = `inset(${
          ((0.5 - scrolled) / 0.5) * 100
        }% 0 0 0)`;
        imgs[1].style.clipPath = `inset(${
          ((1 - scrolled) / 0.5) * 100
        }% 0 0 0)`;
        imgs[2].style.clipPath = `inset(${
          ((1.5 - scrolled) / 0.5) * 100
        }% 0 0 0)`;
        imgs[3].style.clipPath = `inset(${
          ((2 - scrolled) / 0.5) * 100
        }% 0 0 0)`;
      }

      window.onscroll = () => scrollEvent();

      window.onscrollend = () =>
        window.removeEventListener("scroll", scrollEvent);
    </script>
  </body>
</html>
